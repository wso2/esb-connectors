package org.wso2.carbon.inbound.iso8583.listening;

import java.io.DataInputStream;
import java.io.IOException;
import java.net.ServerSocket;
import java.net.Socket;

import org.apache.commons.logging.Log;
import org.apache.commons.logging.LogFactory;

public class CreateConnection extends Thread {
	private static final Log log = LogFactory.getLog(CreateConnection.class);
	private int port;
	private Socket connection;
//    private static ServerSocket server;
    public static DataInputStream inputstreamreader;

     public CreateConnection(Socket connection,int port) {
         this.connection = connection;
         this.port = port;
     }
     
     public void run() {
         try {
//        	 server = new ServerSocket(port);
//             log.info("Server is listening for Request on port " + port);
//             connection = server.accept();
//             log.info("There is a client connected on port :" + port);
             inputstreamreader = new DataInputStream(connection.getInputStream());
//             while (true) {
//                 String input = in.readLine();
//                 if (input == null || input.equals(".")) {
//                     break;
//                 }
//                 out.println(input.toUpperCase());
//             }
         } catch (IOException e) {
             log.error("problem while establish the connection", e);
         } finally {
             try {
            	 connection.close();
             } catch (IOException e) {
                 log.error("Couldn't close a connection", e);
             }
             log.info("Client connection is closed");
         }
     }


}
