<?xml version="1.0" encoding="UTF-8"?>
<template name="getEmployee" xmlns="http://ws.apache.org/ns/synapse">
  <sequence>
    <payloadFactory media-type="json">
      <format>
				{
					"APIKey": "$1",
					"Action": "GetEmployeeDetailById",
					"EmployeeId": "$2"
				}
			</format>
      <args>
        <arg evaluator="xml" expression="get-property('uri.var.apiKey')"/>
        <arg evaluator="xml" expression="get-property('uri.var.employeeId')"/>
      </args>
    </payloadFactory>
    <call>
      <endpoint>
        <http method="post" trace="disable" uri-template="{uri.var.apiUrl}/Employee"/>
      </endpoint>
    </call>
    <!-- Remove response custom header information -->
    <header action="remove" name="X-AspNet-Version" scope="transport"/>
    <header action="remove" name="X-Powered-By" scope="transport"/>
    <header action="remove" name="Access-Control-Allow-Headers" scope="transport"/>
    <header action="remove" name="Access-Control-Allow-Origin" scope="transport"/>
    <header action="remove" name="Access-Control-Allow-Methods" scope="transport"/>
    <header action="remove" name="Cache-Control" scope="transport"/>
  </sequence>
</template>
